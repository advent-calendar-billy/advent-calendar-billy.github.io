<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advent Calendar 2025 - Billy & Fede</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Background with diagonal split -->
    <div class="background-container">
        <!-- Boston side (left/top) -->
        <div class="city-side boston-side">
            <div class="city-gradient"></div>
            <div class="city-skyline boston-skyline"></div>
        </div>

        <!-- Berlin side (right/bottom) -->
        <div class="city-side berlin-side">
            <div class="city-gradient"></div>
            <div class="city-skyline berlin-skyline"></div>
        </div>

        <!-- City landmark drawings -->
        <div class="landmark boston-landmark"></div>
        <div class="landmark boston-landmark-towers"></div>
        <div class="landmark berlin-landmark"></div>
        <div class="landmark berlin-landmark-parks"></div>
        <div class="landmark berlin-landmark-train"></div>

        <!-- Weather effects -->
        <div class="wind-container">
            <canvas id="windCanvas"></canvas>
        </div>
        <div class="snow-container" id="snowContainer"></div>
    </div>

    <!-- Main content -->
    <div class="container">
        <header>
            <h1>Advent Calendar 2025</h1>
        </header>

        <div class="calendar-grid">
            <!-- Days 1-24 generated by JS -->
        </div>

        <footer>
            <p class="dedication">Para Fede</p>
        </footer>
    </div>

    <!-- Boston Skyline SVG (hidden, used as background) -->
    <svg id="boston-skyline-svg" style="display:none" viewBox="0 0 800 200">
        <defs>
            <linearGradient id="bostonBuildingGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                <stop offset="0%" style="stop-color:#1a2a4a"/>
                <stop offset="100%" style="stop-color:#0a1525"/>
            </linearGradient>
        </defs>
        <g fill="url(#bostonBuildingGrad)">
            <!-- Zakim Bridge (cable-stayed) -->
            <path d="M50 200 L50 120 L55 120 L55 200"/>
            <path d="M130 200 L130 120 L135 120 L135 200"/>
            <!-- Bridge cables -->
            <path d="M52 120 L20 180" stroke="#1a2a4a" stroke-width="1" fill="none"/>
            <path d="M52 120 L40 180" stroke="#1a2a4a" stroke-width="1" fill="none"/>
            <path d="M52 120 L60 180" stroke="#1a2a4a" stroke-width="1" fill="none"/>
            <path d="M52 120 L80 180" stroke="#1a2a4a" stroke-width="1" fill="none"/>
            <path d="M133 120 L100 180" stroke="#1a2a4a" stroke-width="1" fill="none"/>
            <path d="M133 120 L120 180" stroke="#1a2a4a" stroke-width="1" fill="none"/>
            <path d="M133 120 L150 180" stroke="#1a2a4a" stroke-width="1" fill="none"/>
            <path d="M133 120 L170 180" stroke="#1a2a4a" stroke-width="1" fill="none"/>
            <!-- Bridge deck -->
            <rect x="10" y="175" width="180" height="8" rx="2"/>

            <!-- Massachusetts State House (golden dome) -->
            <rect x="220" y="140" width="80" height="60"/>
            <rect x="230" y="120" width="60" height="20"/>
            <!-- Dome -->
            <ellipse cx="260" cy="120" rx="25" ry="15"/>
            <rect x="255" y="95" width="10" height="25"/>
            <circle cx="260" cy="90" r="8"/>
            <!-- Columns -->
            <rect x="235" y="140" width="5" height="20"/>
            <rect x="250" y="140" width="5" height="20"/>
            <rect x="265" y="140" width="5" height="20"/>
            <rect x="280" y="140" width="5" height="20"/>

            <!-- Prudential Tower -->
            <rect x="340" y="60" width="40" height="140"/>
            <rect x="345" y="50" width="30" height="10"/>
            <rect x="355" y="35" width="10" height="15"/>

            <!-- John Hancock Tower (trapezoid) -->
            <path d="M420 200 L425 50 L470 50 L475 200"/>
            <rect x="440" y="40" width="15" height="10"/>

            <!-- Custom House Tower -->
            <rect x="520" y="100" width="35" height="100"/>
            <path d="M520 100 L537 70 L555 100"/>
            <rect x="533" y="60" width="8" height="10"/>

            <!-- Generic buildings -->
            <rect x="590" y="130" width="45" height="70"/>
            <rect x="650" y="110" width="35" height="90"/>
            <rect x="700" y="140" width="50" height="60"/>
            <rect x="760" y="120" width="40" height="80"/>
        </g>
        <!-- Building windows (lights) -->
        <g fill="#ffd700" opacity="0.6">
            <rect x="345" y="70" width="3" height="4"/>
            <rect x="355" y="80" width="3" height="4"/>
            <rect x="365" y="70" width="3" height="4"/>
            <rect x="345" y="100" width="3" height="4"/>
            <rect x="365" y="110" width="3" height="4"/>
            <rect x="355" y="130" width="3" height="4"/>
            <rect x="430" y="60" width="3" height="5"/>
            <rect x="445" y="80" width="3" height="5"/>
            <rect x="460" y="70" width="3" height="5"/>
            <rect x="435" y="110" width="3" height="5"/>
            <rect x="455" y="130" width="3" height="5"/>
            <rect x="530" y="110" width="2" height="3"/>
            <rect x="540" y="120" width="2" height="3"/>
            <rect x="535" y="140" width="2" height="3"/>
        </g>
    </svg>

    <!-- Berlin Skyline SVG (hidden, used as background) -->
    <svg id="berlin-skyline-svg" style="display:none" viewBox="0 0 800 200">
        <defs>
            <linearGradient id="berlinBuildingGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                <stop offset="0%" style="stop-color:#2a1a4a"/>
                <stop offset="100%" style="stop-color:#150a25"/>
            </linearGradient>
        </defs>
        <g fill="url(#berlinBuildingGrad)">
            <!-- TV Tower (Fernsehturm) - the iconic needle -->
            <rect x="95" y="180" width="10" height="20"/>
            <path d="M85 180 L100 140 L115 180"/>
            <ellipse cx="100" cy="80" rx="18" ry="25"/>
            <ellipse cx="100" cy="95" rx="12" ry="8"/>
            <rect x="98" y="20" width="4" height="60"/>
            <circle cx="100" cy="75" r="8"/>
            <rect x="99" y="5" width="2" height="15"/>

            <!-- Brandenburg Gate -->
            <rect x="180" y="140" width="100" height="60"/>
            <!-- Gate columns -->
            <rect x="185" y="145" width="8" height="50"/>
            <rect x="205" y="145" width="8" height="50"/>
            <rect x="225" y="145" width="8" height="50"/>
            <rect x="245" y="145" width="8" height="50"/>
            <rect x="265" y="145" width="8" height="50"/>
            <!-- Top structure -->
            <rect x="180" y="130" width="100" height="10"/>
            <!-- Quadriga (chariot on top) -->
            <path d="M215 130 L230 110 L245 130"/>
            <rect x="220" y="115" width="20" height="5"/>
            <ellipse cx="225" cy="112" rx="3" ry="4"/>
            <ellipse cx="235" cy="112" rx="3" ry="4"/>
            <rect x="228" y="105" width="4" height="7"/>

            <!-- Reichstag Building -->
            <rect x="320" y="120" width="120" height="80"/>
            <rect x="330" y="100" width="100" height="20"/>
            <!-- Glass dome -->
            <ellipse cx="380" cy="100" rx="30" ry="20"/>
            <ellipse cx="380" cy="100" rx="22" ry="15"/>
            <!-- Dome structure lines -->
            <path d="M365 110 Q380 75 395 110" stroke="#3a2a5a" stroke-width="1" fill="none"/>
            <!-- Columns -->
            <rect x="335" y="120" width="6" height="30"/>
            <rect x="360" y="120" width="6" height="30"/>
            <rect x="395" y="120" width="6" height="30"/>
            <rect x="420" y="120" width="6" height="30"/>

            <!-- Victory Column (SiegessÃ¤ule) -->
            <rect x="490" y="160" width="20" height="40"/>
            <rect x="493" y="100" width="14" height="60"/>
            <circle cx="500" cy="95" r="10"/>
            <path d="M495 95 L505 75"/>
            <ellipse cx="507" cy="73" rx="4" ry="6"/>

            <!-- Berliner Dom (Cathedral) -->
            <rect x="560" y="130" width="80" height="70"/>
            <!-- Main dome -->
            <ellipse cx="600" cy="130" rx="25" ry="20"/>
            <rect x="595" y="100" width="10" height="30"/>
            <circle cx="600" cy="95" r="6"/>
            <!-- Side domes -->
            <ellipse cx="575" cy="140" rx="10" ry="8"/>
            <ellipse cx="625" cy="140" rx="10" ry="8"/>

            <!-- Generic buildings -->
            <rect x="680" y="140" width="40" height="60"/>
            <rect x="730" y="120" width="35" height="80"/>
            <rect x="775" y="150" width="25" height="50"/>
        </g>
        <!-- Building windows (lights) -->
        <g fill="#ffd700" opacity="0.6">
            <rect x="335" y="130" width="4" height="5"/>
            <rect x="360" y="145" width="4" height="5"/>
            <rect x="395" y="135" width="4" height="5"/>
            <rect x="350" y="165" width="4" height="5"/>
            <rect x="400" y="170" width="4" height="5"/>
            <rect x="570" y="150" width="3" height="4"/>
            <rect x="590" y="160" width="3" height="4"/>
            <rect x="620" y="155" width="3" height="4"/>
            <rect x="690" y="155" width="3" height="4"/>
            <rect x="740" y="140" width="3" height="4"/>
        </g>
        <!-- TV Tower observation deck windows -->
        <g fill="#ff9090" opacity="0.5">
            <ellipse cx="100" cy="78" rx="5" ry="3"/>
        </g>
    </svg>

    <script>
        // Generate calendar days
        const calendarGrid = document.querySelector('.calendar-grid');

        // Get current time in Berlin timezone (Europe/Berlin)
        function getBerlinDate() {
            const now = new Date();
            const berlinTime = new Date(now.toLocaleString('en-US', { timeZone: 'Europe/Berlin' }));
            return berlinTime;
        }

        const berlinNow = getBerlinDate();
        const currentDay = berlinNow.getDate();
        const currentMonth = berlinNow.getMonth();

        // Games available - Dec 15 to Dec 24 (folder names with hash for privacy)
        const gamesAvailable = {
            15: '12_15_oo/',
            16: '12_16_kc/game.html',
            17: '12_17_rf/',
            18: '12_18_de/',
            22: '12_22_ja/'
            // Add more games here as they're created
        };

        // Days that will have games (15-24)
        const gameDays = [15, 16, 17, 18, 19, 20, 21, 22, 23, 24];

        // Check if a day should be unlocked (Berlin midnight)
        function isDayUnlocked(day) {
            // Must be December
            if (currentMonth !== 11) return false;
            // Days with early access (always unlocked)
            if (day <= 18) return true;
            // Other days unlock at midnight Berlin time on their respective day
            return currentDay >= day;
        }

        for (let day = 1; day <= 24; day++) {
            const dayElement = document.createElement('div');
            dayElement.className = 'calendar-day';

            const isGameDay = gameDays.includes(day);
            const isUnlocked = isDayUnlocked(day);
            const hasGame = gamesAvailable[day];

            if (!isGameDay) {
                dayElement.classList.add('decorative');
            } else if (isUnlocked) {
                dayElement.classList.add('unlocked');
                if (hasGame) {
                    dayElement.classList.add('has-game');
                    dayElement.addEventListener('click', () => {
                        window.location.href = gamesAvailable[day];
                    });
                } else {
                    dayElement.classList.add('coming-soon');
                }
            } else {
                dayElement.classList.add('locked');
            }

            // Day number
            const dayNumber = document.createElement('span');
            dayNumber.className = 'day-number';
            dayNumber.textContent = day;
            dayElement.appendChild(dayNumber);

            // Lock icon for locked game days
            if (isGameDay && !isUnlocked) {
                const lockIcon = document.createElement('div');
                lockIcon.className = 'lock-icon';
                lockIcon.innerHTML = `
                    <svg viewBox="0 0 24 24" width="18" height="18">
                        <path fill="currentColor" d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
                    </svg>
                `;
                dayElement.appendChild(lockIcon);
            }

            // Gift/play icon for days with games ready
            if (hasGame && isUnlocked) {
                const playIcon = document.createElement('div');
                playIcon.className = 'play-icon';
                playIcon.innerHTML = `
                    <svg viewBox="0 0 24 24" width="20" height="20">
                        <path fill="#ffd700" d="M8 5v14l11-7z"/>
                    </svg>
                `;
                dayElement.appendChild(playIcon);
            }

            if (day === 24) {
                dayElement.classList.add('christmas-eve');
            }

            calendarGrid.appendChild(dayElement);
        }

        // Generate snow for Berlin
        const snowContainer = document.getElementById('snowContainer');
        for (let i = 0; i < 50; i++) {
            const snowflake = document.createElement('div');
            snowflake.className = 'snowflake';
            snowflake.innerHTML = '&#10052;'; // Snowflake character
            snowflake.style.left = `${Math.random() * 100}%`;
            snowflake.style.animationDuration = `${Math.random() * 5 + 8}s`;
            snowflake.style.animationDelay = `${Math.random() * 10}s`;
            snowflake.style.fontSize = `${Math.random() * 8 + 6}px`;
            snowflake.style.opacity = Math.random() * 0.5 + 0.3;
            snowContainer.appendChild(snowflake);
        }

        // Canvas-based wind particle system for Boston
        const windCanvas = document.getElementById('windCanvas');
        const ctx = windCanvas.getContext('2d');

        function resizeCanvas() {
            windCanvas.width = window.innerWidth;
            windCanvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // Wind particles - flowing lines
        class WindParticle {
            constructor() {
                this.reset();
            }

            reset() {
                // Start from left side
                this.x = Math.random() * -200;
                this.y = Math.random() * windCanvas.height;
                // Speed varies - some gusts faster than others
                this.speed = Math.random() * 8 + 4;
                // Length of the wind streak
                this.length = Math.random() * 80 + 40;
                // Slight vertical wobble
                this.wobbleSpeed = Math.random() * 0.02 + 0.01;
                this.wobbleAmount = Math.random() * 30 + 10;
                this.wobbleOffset = Math.random() * Math.PI * 2;
                // Opacity
                this.opacity = Math.random() * 0.3 + 0.1;
                this.time = 0;
            }

            update() {
                this.time += this.wobbleSpeed;
                this.x += this.speed;
                // Gentle wave motion
                this.yOffset = Math.sin(this.time + this.wobbleOffset) * this.wobbleAmount;

                // Reset when off screen (accounting for diagonal clip)
                const clipX = this.y * 0.65; // Approximate diagonal boundary
                if (this.x > clipX + 100) {
                    this.reset();
                }
            }

            draw() {
                const y = this.y + this.yOffset;

                // Only draw if within Boston's diagonal region
                const clipBoundary = (y / windCanvas.height) * windCanvas.width * 0.65;
                if (this.x > clipBoundary) return;

                // Create gradient for the streak
                const gradient = ctx.createLinearGradient(
                    this.x - this.length, y,
                    this.x, y
                );
                gradient.addColorStop(0, 'rgba(126, 184, 218, 0)');
                gradient.addColorStop(0.3, `rgba(126, 184, 218, ${this.opacity * 0.5})`);
                gradient.addColorStop(0.7, `rgba(200, 220, 240, ${this.opacity})`);
                gradient.addColorStop(1, 'rgba(255, 255, 255, 0)');

                ctx.beginPath();
                ctx.strokeStyle = gradient;
                ctx.lineWidth = 1.5;
                ctx.lineCap = 'round';

                // Draw curved wind line
                ctx.moveTo(this.x - this.length, y + Math.sin(this.time - 1) * 5);
                ctx.quadraticCurveTo(
                    this.x - this.length / 2,
                    y + Math.sin(this.time - 0.5) * 8,
                    this.x,
                    y
                );
                ctx.stroke();
            }
        }

        // Create wind particles
        const windParticles = [];
        for (let i = 0; i < 60; i++) {
            const particle = new WindParticle();
            particle.x = Math.random() * windCanvas.width * 0.5; // Spread initial positions
            windParticles.push(particle);
        }

        // Animation loop
        function animateWind() {
            ctx.clearRect(0, 0, windCanvas.width, windCanvas.height);

            windParticles.forEach(particle => {
                particle.update();
                particle.draw();
            });

            requestAnimationFrame(animateWind);
        }
        animateWind();

    </script>
</body>
</html>
